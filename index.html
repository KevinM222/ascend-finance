<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ascend Crypto On-Ramp Service - Your Launchpad to the Future of Finance">
    <title>Ascend Finance</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="icon" href="assets/images/favicon_io/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <!-- Hero section with background -->
    <section class="hero-section">
        <div class="logo-container">
            <p class="tagline">Your Launchpad to the Future of Finance</p>
            <img src="assets/images/logo.webp" alt="Ascend Logo" class="main-logo">
        </div>

        <div class="wallet-container">
            <button id="connectWalletButton" onclick="connectWallet()">Connect Wallet</button>
            <button id="disconnectWalletButton" onclick="disconnectWallet()" style="display: none;">Disconnect Wallet</button>
            <button id="addToMetaMaskButton" onclick="addToMetaMask()" style="display: none;">Add ASC to MetaMask</button>
        </div>

        <!-- Token Information (Balance & Price) -->
        <div class="token-info-top">
            <p id="tokenBalance">Your ASC Balance: N/A</p>
            <p id="tokenPrice">ASC Price: Loading...</p>
        </div>
    </section>

    <!-- Navigation Bar -->
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="roadmap.html">Roadmap</a></li>
            <li><a href="whitepaper.html">Whitepaper</a></li>
            <li><a href="https://polygonscan.com/token/0x4456b0f017f6bf9b0aa7a0ac3d3f224902a1937a" target="_blank">ASC Token</a></li>
        </ul>
    </nav>

    <!-- Empowering Quote and CTA Buttons -->
    <div class="bottom-content">
        <button class="cta-button-sushiswap" onclick="window.open('https://sushi.com/swap?inputCurrency=0x4456b0f017f6bf9b0aa7a0ac3d3f224902a1937a&outputCurrency=POL', '_blank')">
            Swap ASC on SushiSwap
        </button>
        <p class="empowering-quote">"Empower your financial future with Ascend."</p>
        <button class="cta-button" onclick="window.location.href='roadmap.html'">Explore the Roadmap</button>
    </div>

    <script>
        let currentAddress = null;

        window.ethereum.on('accountsChanged', function (accounts) {
            if (accounts.length === 0) {
                disconnectWallet();
            } else {
                connectWallet();
            }
        });

        async function connectWallet() {
            const button = document.getElementById('connectWalletButton');
            const disconnectButton = document.getElementById('disconnectWalletButton');
            const addToMetaMaskButton = document.getElementById('addToMetaMaskButton');
            button.disabled = true;

            try {
                const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                currentAddress = accounts[0];
                button.innerHTML = `Connected: ${currentAddress.substring(0, 6)}...${currentAddress.substring(currentAddress.length - 4)}`;
                button.style.backgroundColor = "#28a745"; // Green when connected
                disconnectButton.style.display = 'inline-block';
                addToMetaMaskButton.style.display = 'inline-block';
                await getTokenBalance();
                await getTokenPrice();
            } catch (error) {
                alert("Failed to connect to MetaMask. Please try again.");
                button.disabled = false;
            }
        }

        function disconnectWallet() {
            const button = document.getElementById('connectWalletButton');
            const disconnectButton = document.getElementById('disconnectWalletButton');
            const addToMetaMaskButton = document.getElementById('addToMetaMaskButton');
            currentAddress = null;
            button.innerHTML = 'Connect Wallet';
            button.style.backgroundColor = "#007bff";
            disconnectButton.style.display = 'none';
            addToMetaMaskButton.style.display = 'none';
            document.getElementById('tokenBalance').textContent = 'Your ASC Balance: N/A';
            document.getElementById('tokenPrice').textContent = 'ASC Price: Loading...';
        }

        async function getTokenBalance() {
            const balance = await getBalanceFromDex(); // Call a function from dexintegration.js
            document.getElementById('tokenBalance').textContent = `Your ASC Balance: ${balance}`;
        }

        async function getTokenPrice() {
            const price = await getPriceFromDex(); // Call a function from dexintegration.js
            document.getElementById('tokenPrice').textContent = `ASC Price: $${price}`;
        }
    </script>
    <!-- Include dexintegration.js -->
    <script src="assets/Js/dexintegration.js"></script>
</body>
</html>
